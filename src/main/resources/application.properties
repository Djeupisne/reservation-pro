spring.application.name=${SPRING_APPLICATION_NAME}
server.port=${SERVER_PORT:8080}

# Database connection
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME}

# Flyway configuration
spring.flyway.enabled=${SPRING_FLYWAY_ENABLED:true}
spring.flyway.locations=${SPRING_FLYWAY_LOCATIONS:classpath:db/migration}
spring.flyway.baseline-on-migrate=${SPRING_FLYWAY_BASELINE_ON_MIGRATE:true}
spring.flyway.baseline-version=${SPRING_FLYWAY_BASELINE_VERSION:0}

# JPA / Hibernate - CHANGÉ DE 'validate' À 'update'
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.open-in-view=${SPRING_JPA_OPEN_IN_VIEW:false}
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM}

# Disable SQL initialization to avoid conflicts with Flyway
spring.sql.init.mode=${SPRING_SQL_INIT_MODE:never}

# Email configuration
spring.mail.host=${SPRING_MAIL_HOST}
spring.mail.port=${SPRING_MAIL_PORT}
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE:true}
spring.mail.from=${SPRING_MAIL_FROM}

# RabbitMQ configuration
spring.rabbitmq.host=${SPRING_RABBITMQ_HOST}
spring.rabbitmq.port=${SPRING_RABBITMQ_PORT}
spring.rabbitmq.username=${SPRING_RABBITMQ_USERNAME}
spring.rabbitmq.password=${SPRING_RABBITMQ_PASSWORD}

# Logging
logging.level.org.springframework=${LOGGING_LEVEL_SPRING:DEBUG}
logging.level.org.springframework.web=${LOGGING_LEVEL_WEB:DEBUG}
logging.level.org.hibernate.SQL=${LOGGING_LEVEL_SQL:DEBUG}
logging.level.org.hibernate.orm.jdbc.bind=${LOGGING_LEVEL_BIND:TRACE}
logging.level.org.flywaydb=${LOGGING_LEVEL_FLYWAY:DEBUG}
logging.level.org.springframework.context=${LOGGING_LEVEL_CONTEXT:DEBUG}

# JWT configuration
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}

# DÉSACTIVER RabbitMQ COMPLÈTEMENT (LIGNE AJOUTÉE)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration